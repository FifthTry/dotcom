-- import: fastn-community.github.io/design-system as ds


-- ds.page: Views

-- ds.column:
inset: $ds.spaces.inset-square.large
background.solid: $ds.colors.background.base
height: fill-container
align-content: top-left
radius: $ds.radius.zero

	-- ds.heading-large: Views
	
	-- ds.heading-small: Sites
	
	-- ds.copy-large:
	
	- [dashboard](/dev/views/dashboard/)
	- [domains](/dev/views/domains/)
	- [github-oidc](/dev/views/github-oidc/)
	- [site-info](/dev/views/site-info/)
	
-- end: ds.column

-- end: ds.page






-- or-type validation-status:

-- constant integer pending: 0
-- constant integer done: 1

-- end: validation-status



;; todo: move records to records folder
-- record validation:
caption title:
validation-status status: pending
optional body description:
optional string error-message:
optional boolean implement-in-future:

-- record system-field:
caption name:
validation list validations:

-- record user-field:
caption name:
validation list validations:

-- record view-argument:
caption name:
validation list validations:










;; todo: move the below components to components folder
-- component view:
caption name:
optional string description:
string url:
string method: get
optional string response:
boolean unimplemented: false
view-argument list view-arguments:
optional string code-reference:
validation list other-validations:

-- ds.column:
inset: $ds.spaces.inset-square.large
background.solid: $ds.colors.background.base
align-content: top-left
radius: $ds.radius.zero

	-- ds.row:
	align-content: left
	
		-- ds.heading-medium: $view-format(a = $view.name)
		width: hug-content
		
		-- ftd.image: $assets.files.assets.alert.svg
		if: { view.unimplemented }
		width.fixed.px: 30
		
	-- end: ds.row

	-- ds.copy-large: $view.description
	if: { view.description != NULL }
	
	-- ds.copy-large: $prefix-string(prefix=Endpoint, a = $view.url)
	
	-- ds.copy-large: $prefix-string(prefix=Method, a = $view.method)
	
	-- ds.copy-large: $prefix-string(prefix=Code Reference, a = $view.code-reference)
	if: { view.code-reference != NULL }
	
	-- ds.column:
	height: fill-container
	align-content: left
	
		-- ds.heading-small: View Arguments
		
		-- show-view-argument: $field
		for: field in $view.view-arguments
		
		-- ds.heading-small: Other Validations
		if: { ftd.len($view.other-validations) > 0 }
		
		-- show-validation: $validation
		for: validation in $view.other-validations
		
		-- ds.code: Expected response
		lang: ftd
		
		$view.response
		
	-- end: ds.column

-- end: ds.column

-- end: view




-- component show-view-argument:
caption view-argument argument:

-- ds.column:
align-content: left
border: $ds.borders.uniform.small
border-color: $ds.colors.border
inset: $ds.spaces.inset-square.large

	-- ds.copy-large: $prefix-string(prefix=Argument, a = $show-view-argument.argument.name)
	
	-- show-validation: $validation
	for: validation in $show-view-argument.argument.validations
	
-- end: ds.column

-- end: show-view-argument







-- component show-system-field:
caption system-field field:

-- ds.column:
align-content: left
border: $ds.borders.uniform.small
border-color: $ds.colors.border
inset: $ds.spaces.inset-square.large

	-- ds.copy-large: $prefix-string(prefix=Field, a = $show-system-field.field.name)
	
	-- show-validation: $validation
	for: validation in $show-system-field.field.validations
	
	
-- end: ds.column

-- end: show-system-field








-- component show-user-field:
caption user-field field:

-- ds.column:
align-content: left
border: $ds.borders.uniform.small
border-color: $ds.colors.border
inset: $ds.spaces.inset-square.large

	-- ds.copy-large: $prefix-string(prefix=Field, a = $show-user-field.field.name)
	
	-- show-validation: $validation
	for: validation in $show-user-field.field.validations
	
	
-- end: ds.column

-- end: show-user-field








-- component show-validation:
caption validation v:

-- ds.column:
width: hug-content
align-content: left
inset: $ds.spaces.inset-square.large
border: $ds.borders.uniform.small
border-color: $ds.colors.border

	-- ds.copy-large: $prefix-string(prefix=Validation, a = $show-validation.v.title)
	
	-- ds.copy-large: $prefix-string(prefix=Description, a = $show-validation.v.description)
	if: { show-validation.v.description != NULL }
	
	-- ds.copy-large: Status = Pending
	text if { $show-validation.v.status == done }: Status = Done
	color if { $show-validation.v.status == done }: $ds.colors.success.text
	color if { $show-validation.v.status == pending }: $ds.colors.warning.text
	style: bold
	
	-- ds.copy-large: $prefix-boolean(prefix=Implement in Future, a = $show-validation.v.implement-in-future)
	if: { $show-validation.v.implement-in-future != NULL }
	
-- end: ds.column

-- end: show-validation



-- string prefix-string(prefix, a):
string prefix:
string a:

"**" + prefix + "**: " + a

-- string prefix-boolean(prefix, a):
string prefix:
boolean a:

"**" + prefix + "**: " + a


-- string view-format(a):
string a:

"**View:** " + a
